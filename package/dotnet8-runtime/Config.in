config BR2_PACKAGE_DOTNET8_RUNTIME_ARCH_SUPPORTS
	bool
	default y if BR2_aarch64
	# On ARM CoreCLR JIT requires 16 64-bit or 32 32-bit FPU registers
	default y if BR2_arm && (BR2_ARM_FPU_VFPV3 || BR2_ARM_FPU_VFPV3D16 || \
				 BR2_ARM_FPU_VFPV4 || BR2_ARM_FPU_VFPV4D16)
	depends on BR2_USE_MMU # fork()
	depends on BR2_TOOLCHAIN_GCC_AT_LEAST_8 # aarch64 fpu assembly registers build failure

config BR2_PACKAGE_DOTNET8_RUNTIME
	bool "dotnet8-runtime"
	depends on BR2_TOOLCHAIN_USES_GLIBC || BR2_TOOLCHAIN_USES_MUSL
	depends on BR2_TOOLCHAIN_HAS_THREADS
	depends on !BR2_STATIC_LIBS
	depends on BR2_INSTALL_LIBSTDCPP
	depends on BR2_PACKAGE_DOTNET8_RUNTIME_ARCH_SUPPORTS
	select BR2_PACKAGE_HOST_CMAKE
	select BR2_PACKAGE_ICU
	select BR2_PACKAGE_LIBCURL
	select BR2_PACKAGE_LIBKRB5
	select BR2_PACKAGE_LIBZLIB
	select BR2_PACKAGE_LTTNG_LIBUST
	select BR2_PACKAGE_OPENSSL
	help
	  .NET Core 8 Runtime

	  https://dotnet.microsoft.com/download/dotnet-core/8.0

comment "dotnet-runtime needs a toolchain w/ glibc or musl and threads"
	depends on BR2_PACKAGE_DOTNET8_RUNTIME_ARCH_SUPPORTS
	depends on !BR2_TOOLCHAIN_USES_GLIBC && !BR2_TOOLCHAIN_USES_MUSL
	depends on BR2_STATIC_LIBS || !BR2_TOOLCHAIN_HAS_THREADS
